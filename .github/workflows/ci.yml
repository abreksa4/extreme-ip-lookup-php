name: CI

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v1

      - name: Install composer dependencies
        run: composer install --prefer-dist

      - name: Run PHPUnit
        env:
          EXT_IP_KEY: ${{ secrets.EXT_IP_KEY }}
        run: php7.3 vendor/bin/phpunit ./tests --coverage-text